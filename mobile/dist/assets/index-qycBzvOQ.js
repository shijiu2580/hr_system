import{az as F,M as _,l as $,m as I,f as l,aA as K,$ as Y,a0 as j,a1 as R,P as y,r as C,aB as V,q as H,aC as G,o as q,p as J,D as U,G as O,J as M,U as L,I as X,S as N,L as B,n as Q,E as W,K as Z,ax as p,N as ee}from"./index-DE8r4v9z.js";const te=Symbol(),ae=()=>F(te,null),[ne,w]=_("tag"),se={size:String,mark:Boolean,show:I,type:R("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var oe=$({name:ne,props:se,emits:["close"],setup(e,{slots:c,emit:n}){const i=r=>{r.stopPropagation(),n("close",r)},g=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},T=()=>{var r;const{type:a,mark:u,plain:d,round:m,size:v,closeable:f}=e,x={mark:u,plain:d,round:m};v&&(x[v]=v);const s=f&&l(j,{name:"cross",class:[w("close"),Y],onClick:i},null);return l("span",{style:g(),class:w([x,a])},[(r=c.default)==null?void 0:r.call(c),s])};return()=>l(K,{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?T():null]})}});const me=y(oe),[le,b,ie]=_("list"),re={error:Boolean,offset:B(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:R("down"),loadingText:{type:String,default:""},finishedText:String,immediateCheck:I};var ce=$({name:le,props:re,emits:["load","update:error","update:loading"],setup(e,{emit:c,slots:n}){const i=C(e.loading),g=C(),T=C(),r=ae(),a=V(g),u=O(()=>e.scroller||a.value),d=()=>{M(()=>{if(i.value||e.finished||e.disabled||e.error||(r==null?void 0:r.value)===!1)return;const{direction:s}=e,S=+e.offset,h=L(u);if(!h.height||X(g))return;let P=!1;const E=L(T);s==="up"?P=h.top-E.top<=S:P=E.bottom-h.bottom<=S,P&&(i.value=!0,c("update:loading",!0),c("load"))})},m=()=>{if(e.finished){const s=n.finished?n.finished():e.finishedText;if(s)return l("div",{class:b("finished-text")},[s])}},v=()=>{c("update:error",!1),d()},f=()=>{if(e.error){const s=n.error?n.error():e.errorText;if(s)return l("div",{role:"button",class:b("error-text"),tabindex:0,onClick:v},[s])}},x=()=>{if(i.value&&!e.finished&&!e.disabled)return l("div",{class:b("loading")},[n.loading?n.loading():e.loadingText!=null&&l(N,{class:b("loading-icon")},{default:()=>[e.loadingText||ie("loading")]})])};return H(()=>[e.loading,e.finished,e.error],d),r&&H(r,s=>{s&&d()}),G(()=>{i.value=e.loading}),q(()=>{e.immediateCheck&&d()}),J({check:d}),U("scroll",d,{target:u,passive:!0}),()=>{var s;const S=(s=n.default)==null?void 0:s.call(n),h=l("div",{ref:T,class:b("placeholder")},null);return l("div",{ref:g,role:"feed",class:b(),"aria-busy":i.value},[e.direction==="down"?S:h,x(),m(),f(),e.direction==="up"?S:h])}}});const ve=y(ce),[ue,D,de]=_("pull-refresh"),z=50,fe=["pulling","loosing","success"],he={disabled:Boolean,modelValue:Boolean,headHeight:B(z),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:Q,successDuration:B(500),animationDuration:B(300)};var ge=$({name:ue,props:he,emits:["change","refresh","update:modelValue"],setup(e,{emit:c,slots:n}){let i;const g=C(),T=C(),r=V(g),a=W({status:"normal",distance:0,duration:0}),u=ee(),d=()=>{if(e.headHeight!==z)return{height:`${e.headHeight}px`}},m=()=>a.status!=="loading"&&a.status!=="success"&&!e.disabled,v=t=>{const o=+(e.pullDistance||e.headHeight);return t>o&&(t<o*2?t=o+(t-o)/2:t=o*1.5+(t-o*2)/4),Math.round(t)},f=(t,o)=>{const k=+(e.pullDistance||e.headHeight);a.distance=t,o?a.status="loading":t===0?a.status="normal":t<k?a.status="pulling":a.status="loosing",c("change",{status:a.status,distance:t})},x=()=>{const{status:t}=a;return t==="normal"?"":e[`${t}Text`]||de(t)},s=()=>{const{status:t,distance:o}=a;if(n[t])return n[t]({distance:o});const k=[];return fe.includes(t)&&k.push(l("div",{class:D("text")},[x()])),t==="loading"&&k.push(l(N,{class:D("loading")},{default:x})),k},S=()=>{a.status="success",setTimeout(()=>{f(0)},+e.successDuration)},h=t=>{i=p(r.value)===0,i&&(a.duration=0,u.start(t))},P=t=>{m()&&h(t)},E=t=>{if(m()){i||h(t);const{deltaY:o}=u;u.move(t),i&&o.value>=0&&u.isVertical()&&(Z(t),f(v(o.value)))}},A=()=>{i&&u.deltaY.value&&m()&&(a.duration=+e.animationDuration,a.status==="loosing"?(f(+e.headHeight,!0),c("update:modelValue",!0),M(()=>c("refresh"))):f(0))};return H(()=>e.modelValue,t=>{a.duration=+e.animationDuration,t?f(+e.headHeight,!0):n.success||e.successText?S():f(0,!1)}),U("touchmove",E,{target:T}),()=>{var t;const o={transitionDuration:`${a.duration}ms`,transform:a.distance?`translate3d(0,${a.distance}px, 0)`:""};return l("div",{ref:g,class:D()},[l("div",{ref:T,class:D("track"),style:o,onTouchstartPassive:P,onTouchend:A,onTouchcancel:A},[l("div",{class:D("head"),style:d()},[s()]),(t=n.default)==null?void 0:t.call(n)])])}}});const xe=y(ge);export{ve as L,xe as P,me as T};
