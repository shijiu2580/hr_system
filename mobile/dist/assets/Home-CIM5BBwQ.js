import"./index-BfNrj1Io.js";import{T as U,a as W}from"./index-PtygPl2G.js";import{a as j,C as E}from"./index-CcX8rTri.js";import{_ as M,a as P,o as q,j as I,b as f,c as F,e as t,f as a,w as s,t as u,ah as $,S as J,a0 as K,an as O,r as m,G as i}from"./index-DE8r4v9z.js";import{I as Q}from"./index-D57cqCsI.js";import"./use-placeholder-33bInLsI.js";const R={class:"page-container"},X={class:"header"},Y={class:"user-info"},Z={class:"avatar-placeholder"},ee={class:"user-text"},ne={class:"user-name"},te={class:"user-dept"},ae={class:"checkin-status"},oe={class:"checkin-text"},se={class:"checkin-title"},ie={class:"checkin-time"},le={class:"menu-grid"},ce={class:"menu-icon",style:{background:"#e8f4ff"}},re={class:"menu-icon",style:{background:"#e8f7e8"}},ue={class:"menu-icon",style:{background:"#fff7e8"}},de={class:"menu-icon",style:{background:"#f7e8ff"}},me={__name:"Home",setup(ve){const d=P(),p=m(0),z=i(()=>{var n;return((n=d.employeeInfo)==null?void 0:n.avatar)||""}),k=i(()=>{var n,e;return((n=d.employeeInfo)==null?void 0:n.name)||((e=d.userInfo)==null?void 0:e.username)||"用户"}),C=i(()=>k.value.charAt(0)),w=i(()=>{var n;return((n=d.employeeInfo)==null?void 0:n.department)||"未分配"}),T=i(()=>{var n;return((n=d.employeeInfo)==null?void 0:n.position)||"未分配"}),c=m(null),r=m(!0),h=m(""),v=m(!0),y=i(()=>{var n;return!!((n=c.value)!=null&&n.check_in_time)}),V=i(()=>r.value?c.value?c.value.check_out_time?"今日已签退":"今日已签到":"今日未签到":"今日休息"),x=i(()=>r.value?c.value?c.value.check_out_time?`签退时间 ${c.value.check_out_time.slice(0,5)}`:`签到时间 ${c.value.check_in_time.slice(0,5)}`:"点击进行签到":h.value||"周末愉快"),B=i(()=>r.value?y.value?"checked":"clock-o":"smile-o"),N=i(()=>r.value?y.value?"#07c160":"#969799":"#1989fa");q(async()=>{await Promise.all([A(),S()]),v.value=!1});async function S(){try{const n=await I.get("/api/attendance/workday/");n.data.success&&(r.value=n.data.data.is_workday,h.value=n.data.data.holiday_name||"")}catch{const e=new Date().getDay();r.value=e!==0&&e!==6}}async function A(){try{const n=await I.get("/api/attendance/today/");n.data.success&&(c.value=n.data.data)}catch(n){console.error(n)}}return(n,e)=>{const D=Q,G=J,g=K,l=O,b=j,H=E,_=U,L=W;return f(),F("div",R,[t("div",X,[t("div",Y,[a(D,{round:"",width:"50",height:"50",src:z.value,fit:"cover"},{error:s(()=>[t("div",Z,u(C.value),1)]),_:1},8,["src"]),t("div",ee,[t("div",ne,u(k.value),1),t("div",te,u(w.value)+" · "+u(T.value),1)])])]),t("div",{class:"checkin-card card",onClick:e[0]||(e[0]=o=>n.$router.push("/checkin"))},[t("div",ae,[v.value?(f(),$(G,{key:0,size:"24"})):(f(),$(g,{key:1,name:B.value,color:N.value,size:"32"},null,8,["name","color"])),t("div",oe,[t("div",se,u(v.value?"加载中...":V.value),1),t("div",ie,u(v.value?"":x.value),1)])]),a(g,{name:"arrow",color:"#969799"})]),t("div",le,[t("div",{class:"menu-item",onClick:e[1]||(e[1]=o=>n.$router.push("/checkin"))},[t("div",ce,[a(l,{name:"attendance",color:"#1989fa",size:"24"})]),e[6]||(e[6]=t("span",null,"签到打卡",-1))]),t("div",{class:"menu-item",onClick:e[2]||(e[2]=o=>n.$router.push("/attendance"))},[t("div",re,[a(l,{name:"calendar",color:"#07c160",size:"24"})]),e[7]||(e[7]=t("span",null,"考勤记录",-1))]),t("div",{class:"menu-item",onClick:e[3]||(e[3]=o=>n.$router.push("/leave"))},[t("div",ue,[a(l,{name:"leaves",color:"#ff976a",size:"24"})]),e[8]||(e[8]=t("span",null,"请假申请",-1))]),t("div",{class:"menu-item",onClick:e[4]||(e[4]=o=>n.$router.push("/me"))},[t("div",de,[a(l,{name:"account",color:"#b37feb",size:"24"})]),e[9]||(e[9]=t("span",null,"个人中心",-1))])]),e[13]||(e[13]=t("div",{class:"section-title"},"快捷服务",-1)),a(H,{inset:""},{default:s(()=>[a(b,{title:"补签申请","is-link":"",to:"/attendance"},{icon:s(()=>[a(l,{name:"leaves",size:"16",style:{"margin-right":"4px","vertical-align":"middle"}})]),_:1}),a(b,{title:"公司通知","is-link":""},{icon:s(()=>[a(l,{name:"documents",size:"16",style:{"margin-right":"4px","vertical-align":"middle"}})]),_:1})]),_:1}),a(L,{modelValue:p.value,"onUpdate:modelValue":e[5]||(e[5]=o=>p.value=o),fixed:""},{default:s(()=>[a(_,{to:"/home"},{icon:s(({active:o})=>[a(l,{name:"dashboard",color:o?"#1989fa":"#646566",size:"20"},null,8,["color"])]),default:s(()=>[e[10]||(e[10]=t("span",null,"首页",-1))]),_:1}),a(_,{to:"/checkin"},{icon:s(({active:o})=>[a(l,{name:"attendance",color:o?"#1989fa":"#646566",size:"20"},null,8,["color"])]),default:s(()=>[e[11]||(e[11]=t("span",null,"打卡",-1))]),_:1}),a(_,{to:"/me"},{icon:s(({active:o})=>[a(l,{name:"account",color:o?"#1989fa":"#646566",size:"20"},null,8,["color"])]),default:s(()=>[e[12]||(e[12]=t("span",null,"我的",-1))]),_:1})]),_:1},8,["modelValue"])])}}},ge=M(me,[["__scopeId","data-v-599525c2"]]);export{ge as default};
