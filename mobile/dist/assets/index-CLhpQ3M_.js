import{s as I,f as N,p as R,P as _,g as A,a as m}from"./index-xRfbtRpH.js";import{M as B,a5 as G,aq as y,l as K,r as i,q as x,ar as d,p as U,f as X,X as b,Y as j,G as M,P as z}from"./index-DE8r4v9z.js";const Y=new Date().getFullYear(),[H]=B("date-picker"),J=G({},I,{columnsType:{type:Array,default:()=>["year","month","day"]},minDate:{type:Date,default:()=>new Date(Y-10,0,1),validator:y},maxDate:{type:Date,default:()=>new Date(Y+10,11,31),validator:y}});var L=K({name:H,props:J,emits:["confirm","cancel","change","update:modelValue"],setup(a,{emit:r,slots:V}){const n=i(a.modelValue),l=i(!1),f=i(),c=M(()=>l.value?a.modelValue:n.value),D=e=>e===a.minDate.getFullYear(),g=e=>e===a.maxDate.getFullYear(),P=e=>e===a.minDate.getMonth()+1,k=e=>e===a.maxDate.getMonth()+1,s=e=>{const{minDate:t,columnsType:o}=a,u=o.indexOf(e),v=c.value[u];if(v)return+v;switch(e){case"year":return t.getFullYear();case"month":return t.getMonth()+1;case"day":return t.getDate()}},C=()=>{const e=a.minDate.getFullYear(),t=a.maxDate.getFullYear();return m(e,t,"year",a.formatter,a.filter,c.value)},F=()=>{const e=s("year"),t=D(e)?a.minDate.getMonth()+1:1,o=g(e)?a.maxDate.getMonth()+1:12;return m(t,o,"month",a.formatter,a.filter,c.value)},O=()=>{const e=s("year"),t=s("month"),o=D(e)&&P(t)?a.minDate.getDate():1,u=g(e)&&k(t)?a.maxDate.getDate():A(e,t);return m(o,u,"day",a.formatter,a.filter,c.value)},w=()=>{var e;return(e=f.value)==null?void 0:e.confirm()},E=()=>n.value,h=M(()=>a.columnsType.map(e=>{switch(e){case"year":return C();case"month":return F();case"day":return O();default:return[]}}));x(n,e=>{d(e,a.modelValue)||r("update:modelValue",e)}),x(()=>a.modelValue,(e,t)=>{l.value=d(t,n.value),e=N(e,h.value),d(e,n.value)||(n.value=e),l.value=!1},{immediate:!0});const S=(...e)=>r("change",...e),T=(...e)=>r("cancel",...e),q=(...e)=>r("confirm",...e);return U({confirm:w,getSelectedDate:E}),()=>X(_,b({ref:f,modelValue:n.value,"onUpdate:modelValue":e=>n.value=e,columns:h.value,onChange:S,onCancel:T,onConfirm:q},j(a,R)),V)}});const Z=z(L);export{Z as D};
